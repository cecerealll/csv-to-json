<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <p></p>
    <input type="file" id='csv'>
    <button>convert</button>

    <script>
        
        const selectedFile = document.getElementById('csv');
        const convert = document.querySelector('button');
        let fileToRead;

        selectedFile.addEventListener('change', function(){
            fileToRead = selectedFile.files[0];
            // console.log(typeof fileToRead);
           
        });
        
     

        convert.addEventListener('click', function readFile(){
            // console.log('hi');
            // console.log(fileToRead);
            const scan = new FileReader();
            scan.readAsText(fileToRead);
            scan.onload = function(e) {
                const fileString = e.target.result.replace(/\n/ig, '');

                // to split the csv into diff rows
                const fileRows = fileString.split(`\r`);
                console.log(fileRows);
                // split individual words
                const fileCol = fileRows.map(col => col.split(','));

                // get rid of the first empty string
                fileCol[0].shift();

                // the animals array
                const firstRow = fileCol[0];
                console.log(fileCol);

                // for(let i = 1; i<fileCol.length; i++){
                //     // console.log(fileCol[i]);
                //     const property = fileCol[i][0];
                //     const obj = {};
                //     obj[fileCol[i][0]] = fileCol[i][i];
                //     console.log(obj);
                // }

                const obj = firstRow.reduce((acc, curr)=> {
                    // console.log(first);
                    // console.log(next);
                    // // console.log(first[next]);
                    // return next = 0;
                    if(!acc[curr]){
                        acc[curr] = 0
                    };
                    acc[curr]++;
                    // console.log(acc[curr]);
                    return acc;
                    
                }, {});
                console.log(obj);

                // use reduce?

                const firstCol = [];
            }

        })
        


        



        // convert the csv file into a JSON file
        // this is essentially what we want from the csv
        // {
        //     "Dog": {
        //         "Loud": "yes",
        //         "Dirty": "yes",
        //         "Fluffy": "yes"
        //     },
        //     "Cat": {
        //         "Loud": "no",
        //         "Dirty": "no",
        //         "Fluffy": "yes"
        //     },
        //     "Bird": {
        //         "Loud": "yes",
        //         "Dirty": "no",
        //         "Fluffy": "no"
        //     },
        //     "Lizard": {
        //         "Loud": "no",
        //         "Dirty": "no",
        //         "Fluffy": "no"
        //     }
        // }

    </script>
</body>
</html>